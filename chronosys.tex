% This is is the plain TeX file for the `chronosys' package.
%
% The maintener of this work is Mathieu Long.
% email : mlong.tex@hotmail.fr
% the `chronosys' package consists in the 9 files :
%  -- `docchronosys_en.tex' and `docchronosys_en.pdf' (english manual)
%  -- `docchronosys_fr.tex' and `docchronosys_fr.pdf' (french manual)
%  -- README
%  -- `chronosys.tex' (file for plain TeX)
%  -- `chronosyschr.tex' (main file of the `chronosys' package)
%  -- `chronosys.sty' (file for LaTeX)
%  -- `x-chronosys.tex' (file for ConTeXt)
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
%
% This work has the LPPL maintenance status `maintained'.
% 
% The Current Maintainer of this work is Mathieu Long.
%
% % % %
%Changement de catcode
\catcode`\@=11\relax
%
\unless\ifdefined\tikzpicture
\catcode`\!=12\input tikz.tex\relax\fi 
%
\catcode`\!=11\relax
%
%DEFINITION DE \!CHR@VERIF
\let\!chr@verif\relax
%
%CHARGEMENT DE CHRONOSYSCHR
\input chronosyschr.tex\relax
%
%DEFINITION POUR MOTEUR DE DESSIN
\def\!chrstarttikzpicture{\tikzpicture}\def\!chrstoptikzpicture{\endtikzpicture}%
\!chrverif\def\!chrdraw{\draw}\!chrverif\def\!chrfill{\fill}\!chrverif\def\!chrfilldraw{\filldraw}%
%
% DEFINITION DES SSTEMES DE COLORISATION DU FOND DES EVENTS ET PERIODES
\!chrverif\def\!chrperiodcolorbox#1{%
\setbox\z@ \hbox{\kern2pt#1\kern2pt}%
\dimen@i\dp\z@
\advance\dimen@i\ht\z@ \advance\dimen@i 6pt\relax
\dimen@ii\wd\z@
\advance\dimen@ii 4pt\relax
\setbox\@ne\hbox{{\color{\!chr@periodcolorbox}%
\vrule height\dimen@i width\dimen@ii \relax%
\kern-\dimen@ii}\box\z@}\raise0.5\dimen@ii\vbox to\z@{\box\@ne\vss}}%
%
%
\!chrverif\def\!chreventcolorbox#1{%
\setbox\z@ \hbox{\kern2pt#1\kern2pt}%
\dimen@i\dp\z@
\advance\dimen@i\ht\z@ 
\dimen@ii\wd\z@
\advance\dimen@ii 4pt\relax
\setbox\@ne\hbox {{\color{\!chr@eventcolorbox}%
\vrule height\dimen@i width\dimen@ii depth\z@\relax%
\kern-\dimen@ii}\box\z@}\raise0.5\dimen@ii\vbox to\z@{\box\@ne\vss}}%
%
\!chrverif\let\!chrusecolor\color
%
\catcode`\!=12\relax
\catcode`\@=12\relax
\endinput